{"version":3,"sources":["02_field_wbc_importer.js","01_jquery.filterizr.js"],"names":["cbt_import_poll","msg","type","jQuery","prepend","alert","cbt_import_poll_i","cbt_action_poll","action","location","reload","global","$","Error","Packer","w","this","init","prototype","root","x","y","fit","blocks","n","node","block","len","length","h","findNode","splitNode","growDown","used","right","down","fn","filterizr","self","args","arguments","_fltr","selector","undefined","lastIndexOf","options","extend","animationDuration","callbacks","onFilteringStart","onFilteringEnd","onShufflingStart","onShufflingEnd","onSortingStart","onSortingEnd","delay","delayMode","easing","filter","filterOutCss","opacity","transform","filterInCss","layout","setupControls","setOptions","css","padding","position","_lastCategory","_isAnimating","_isShuffling","_isSorting","_mainArray","_getFiltrItems","_subArrays","_makeSubarrays","_activeArray","_getCollectionByFilter","_toggledCategories","_typedText","val","_uID","replace","c","r","Math","random","toString","_setupEvents","_setupControls","targetFilter","target","trigger","_handleFiltering","_isSearchActivated","search","toggleFilter","toggledFilter","_multifilterModeOn","_makeMultifilterArray","text","array","i","containsText","toLowerCase","indexOf","push","_filterOut","shuffle","_fisherYatesShuffle","_placeItems","sort","attr","sortOrder","data","_comparator","prop","_calcDelay","filtrItems","find","itemsArray","each","e","item","FiltrItemProto","_init","subArrays","_category","addedMap","belongsToCategory","isUnique","domIndex","Array","isArray","click","sortAttr","keyup","_delayEvent","resize","on","_calcItemPositions","containerHeight","cols","round","width","outerWidth","rows","itemWidth","itemHeight","left","top","posArray","_updateDimensions","packer","outerHeight","rowWidth","itemOuterWidth","nextItemWidth","columnHeight","index","ceil","toFilterOut","_getArrayOfUniqueItems","Object","keys","arr","_itemPositions","_filterIn","_makeDeepCopy","obj","p","a","b","arr1","arr2","v","o","l","timers","callback","ms","uniqueId","clearTimeout","setTimeout","t","m","floor","parent","_parent","_getCategory","_lastPos","sortData","_isFilteredOut","_filteringOut","_filteringIn","-webkit-backface-visibility","perspective","-webkit-perspective","-webkit-transform-style","transition","_onTransitionEnd","ret","split","isNaN","parseInt","addClass","targetPos","removeClass","cbt_uninstall_content","demo_id","post","ajaxurl","response","match","wbc_importer_iframeform","url","object","time","Date","getTime","html","cbt_dialog","addParameter","parameter","value","appendTo","send","submit","load","slideUp","contents","height","slideToggle","redux","document","ready","wbc_importer","delegate","stopPropagation","preventDefault","reimport","message","id","hasClass","parents","confirm","hide","RegExp","demo_import_id","nonce","wbc_import","takeaway","polling_form","append","reImportButton","show","cbt_imported_demos","pages_url","remove","ajax","password","success","keypress","event","keyCode"],"mappings":"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","file":"field_wbc_importer.js","sourcesContent":["/* global redux_change, wp */\n\n(function($) {\n    \"use strict\";\n    $.redux = $.redux || {};\n    $(document).ready(function() {\n        $.redux.wbc_importer();\n    });\n    $.redux.wbc_importer = function() {\n\n\n\t\t$('body').delegate('.wrap-importer.theme .theme-actions a', 'click', function(e) {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\t$('body').delegate('.wrap-importer.theme.not-imported:not(.st-template-locked), #wbc-importer-reimport, #wbc-importer-uninstall', 'click', function(e) {\n            e.preventDefault();\n\n            var parent = jQuery(this);\n\n            var reimport = false;\n\n            var message = 'Import Demo Content?';\n\n            if (e.target.id == 'wbc-importer-reimport') {\n                reimport = true;\n                message = 'Re-Import Content?';\n\n                if (!jQuery(this).hasClass('rendered')) {\n                    parent = jQuery(this).parents('.wrap-importer');\n                }\n            }\n            else if(e.target.id == 'wbc-importer-uninstall') {\n\t\t\t\tmessage = 'All pages, posts, images imported with this demo will be deleted.\\nSure you want to uninstall?';\n\t\t\t\treimport = true;\n\t\t\t\t\n                if (!jQuery(this).hasClass('rendered')) {\n                    parent = jQuery(this).parents('.wrap-importer');\n                }\n            }\n            else if(parent.hasClass('st-template-type-takeaway') ) {\n                message = 'All your website content, settings and plugins will be replaced.\\nSure you want to continue?';\n            }\n\n            if (parent.hasClass('imported') && reimport == false) return;\n\n            var r = confirm(message);\n\n            if (r == false) return;\n            \n\t\t\tif(e.target.id == 'wbc-importer-uninstall') \n\t\t\t{\n\t\t\t\tcbt_uninstall_content(parent);\n\t\t\t\treturn;\n            }\n\n            if (reimport == true) {\n                parent.removeClass('active imported').addClass('not-imported');\n            }\n            \n\n            parent.find('.spinner').css('display', 'inline-block');\n\n            parent.removeClass('active imported');\n\n            parent.find('.importer-button').hide();\n\n            var data = jQuery(this).data();\n            \n            // yunus edit\n            var js_response = '';\n            var patt = new RegExp(\"#js#(.*)#js#\");\n\n            data.action = \"redux_wbc_importer\";\n            data.id = parent.attr(\"id\");\n            data.demo_import_id = parent.attr(\"data-demo-id\");\n            data.nonce = parent.attr(\"data-nonce\");\n            data.type = 'import-demo-content';\n            data.wbc_import = (reimport == true) ? 're-importing' : ' ';\n\n            // takeaway\n            data.takeaway = false;\n            if(parent.hasClass('st-template-type-takeaway') ) {\n                data.takeaway = true;\n            }\n\n            parent.find('.wbc_image').css('opacity', '0.5');\n            \n            cbt_dialog('loader');\n            var polling_form = new wbc_importer_iframeform(ajaxurl);\n\t\t\tpolling_form.addParameter('action', data.action);\n\t\t\tpolling_form.addParameter('id', data.id);\n\t\t\tpolling_form.addParameter('demo_import_id', data.demo_import_id);\n\t\t\tpolling_form.addParameter('nonce', data.nonce);\n\t\t\tpolling_form.addParameter('type', data.type);\n\t\t\tpolling_form.addParameter('wbc_import', data.wbc_import);\n            polling_form.addParameter('takeaway', data.takeaway);\n\t\t\t\n\t\t\tpolling_form.send(function (response)\n\t\t\t{\n                parent.find('.wbc_image').css('opacity', '1');\n                parent.find('.spinner').css('display', 'none');\n\n                if (response.length > 0 && response.match(/Have fun!/gi)) \n                {\n                    if (reimport == false) {\n                        parent.addClass('rendered').find('.wbc-importer-buttons .importer-button').removeClass('import-demo-data');\n\n                        parent.find('.theme-actions .wbc-importer-buttons').append(reImportButton);\n                    }\n                    parent.find('.importer-button:not(#wbc-importer-reimport)').removeClass('button-primary').addClass('button').text('Imported').show();\n                    parent.find('.importer-button').attr('style', '');\n                    parent.addClass('imported active').removeClass('not-imported');\n                    \n                } else {\n                    parent.find('.import-demo-data').show();\n\n                    if (reimport == true) {\n                        parent.find('.importer-button:not(#wbc-importer-reimport)').removeClass('button-primary').addClass('button').text('Imported').show();\n                        parent.find('.importer-button').attr('style', '');\n                        parent.addClass('imported active').removeClass('not-imported');\n                    }\n                    \n                    if (response.length > 0 && response.match(/id=\"content\"/gi)) \n                    {\n\n\t                    cbt_import_poll('There was an internal server error importing demo content.<br />Most likely due to incompatible server settings such as<br />maximum execution time, maximum memory allowance etc.','error');\n\t                    $('.cbt-show-poll-log').click();\n                    }\n                    else\n                    {\n                    \t// cbt_import_poll('There was an error importing demo content:<br />' + response.replace(/(<([^>]+)>)/gi, \"\"),'error');\n                        cbt_import_poll('There was an error importing demo content','error');\n                    }\n                }\n                \n\t\t\t});\n\n            return false;\n        });\n        \n        var reImportButton = '<a target=\"_blank\" class=\"button wbc-importer-view-content\" href=\"#\">View Imported Pages</a><div id=\"wbc-importer-reimport\" class=\"wbc-importer-buttons button-primary import-demo-data importer-button\">Re-Import</div><div id=\"wbc-importer-uninstall\" class=\"wbc-importer-buttons button\">Uninstall</div>';\n        \n        $('body').on('cbt_importer-loaded', function ()\n        {\n        \tvar parent, id;\n            if(cbt_imported_demos)\n            {\n            \t$('.wrap-importer.theme.not-imported').each(function ()\n            \t{\n    \t        \tparent = jQuery(this);\n            \t\tid = parent.attr('id');\n            \t\tif(typeof cbt_imported_demos[id] == 'undefined') return;\n            \t\t\n            \t\t\n                    parent.addClass('rendered').find('.wbc-importer-buttons .importer-button').removeClass('import-demo-data'); \n                    parent.find('.theme-actions .wbc-importer-buttons').append(reImportButton);\n\n                    parent.find('.importer-button:not(#wbc-importer-reimport)').removeClass('button-primary').addClass('button').text('Imported').show();\n                    parent.find('.importer-button').attr('style', '');\n                    parent.addClass('imported active').removeClass('not-imported');\n                    \n                    if(cbt_imported_demos[id].pages_url)\n                    \t$('a.wbc-importer-view-content', parent).attr('href', cbt_imported_demos[id].pages_url);\n                    else\n                    \t$('a.wbc-importer-view-content', parent).remove();\n            \t});\n            }\n\n            $('.cbt_marketplace_container:not(.st_filterizr)').each(function ()\n            {\n                if($(this).find('> .filtr-item').length < 1) return;\n\n                parent = jQuery(this);\n                parent.addClass('st_filterizr');\n                parent.parent().find('.st-marketplace-filters').show();\n\n                var filterizd = $('.cbt_marketplace_container.st_filterizr').filterizr().filterizr('filter', '1');\n            });\n\n        });\n\n\n       $('body').delegate('.st-only-purchased-btn', 'click', function(e) {\n            if( $(this).hasClass('active') )\n            {\n                //$(this).removeClass('active');\n                $('.st-marketplace-categories li[data-filter=\"1\"]').click();\n            } else {\n                $(this).addClass('active');\n            }\n        });\n\n       $('body').delegate('.st-unlock-bonus-btn', 'click', function(e) {\n            e.stopPropagation();\n\n            cbt_dialog( $('.st-marketplace-bonus-dialog-container').html() );\n\n            $('.cbt-bonus-button').click(function ()\n            {\n                var val = $('.cbt-bonus-password:visible').val();\n                cbt_dialog('loader');\n                \n\n                jQuery.ajax(\n                {\n                    url: ajaxurl,\n                    type: 'post',\n                    data: {action: 'cbt_unlock_bonus', password: val},\n                    success: function(data)\n                    {                \n                        cbt_dialog(data);\n                    }\n                });\n\n                return false;\n            });\n        });\n\n       // $('body').delegate('.st-filter-bar-filter', 'click', function(e) {\n       //      e.stopPropagation();\n\n       //  });\n\n        // Market place filter controls\n        $('body').delegate('.st-marketplace-categories li.st-filter-bar-btn', 'click', function(e) {\n            $(this).parent().find('li').removeClass('active');\n            $(this).addClass('active');\n        });\n\n\n        \n \n\n        // Stop user to press enter in Market place Search box\n        $(\".st-marketplace-search input\").keypress(function(event) {\n            if (event.keyCode == 13) {\n                event.preventDefault();\n                return false;\n            }\n        });\n        \n    };\n    \n    \n    function cbt_uninstall_content(parent)\n    {\n\t    var data = jQuery(parent).data();\n        data.action = \"cbt_uninstall_demo\";\n        data.demo_id = parent.attr(\"id\");\n\n        parent.find('.spinner').css('display', 'inline-block');\n        parent.removeClass('active');\n        parent.find('.wbc_image').css('opacity', '0.5');\n            \n        jQuery.post(ajaxurl, data, function(response) \n        {\n\t        parent.find('.wbc_image').css('opacity', '1');\n\t        parent.find('.spinner').css('display', 'none');\n                \n            if (response.length > 0 && response.match(/successfully uninstalled/gi)) \n            {\n\t\t\t\talert(response);\n\t\t\t\tlocation.reload();\n                \n            } else {\n                parent.addClass('active');\n                alert(response);\n                \n            }\n        });\n    }\n\n\n    function cbt_install_takeaway(parent)\n    {\n        var data = jQuery(parent).data();\n        data.action = \"cbt_install_takeaway\";\n        data.demo_id = parent.attr(\"id\");\n\n        parent.find('.spinner').css('display', 'inline-block');\n        parent.removeClass('active');\n        parent.find('.wbc_image').css('opacity', '0.5');\n            \n        jQuery.post(ajaxurl, data, function(response) \n        {\n            parent.find('.wbc_image').css('opacity', '1');\n            parent.find('.spinner').css('display', 'none');\n                \n            if (response.length > 0 && response.match(/successfully install/gi)) \n            {\n                alert(response);\n                location.reload();\n                \n            } else {\n                parent.addClass('active');\n                alert(response);\n                \n            }\n        });\n    }\n    \n    \n\tfunction wbc_importer_iframeform(url)\n\t{\n\t    var object = this;\n\t    object.time = new Date().getTime();\n\t    \n        object.html = '<div class=\"cbt_importer_dialog\">';\n\t    object.html += '<div class=\"cbt_loader\"></div><div class=\"notice notice-info\"><p>Please be patient. Import can take upto 10 minutes depending on your server speed.</p></div>';\n\t    object.html += '<div id=\"cbt_import_poll_msg_frame\"><div id=\"cbt_import_poll_msg\"></div></div>';\n\t    object.html += '<form action=\"'+url+'\" target=\"iframe'+object.time+'\" method=\"post\" style=\"display:none;\" id=\"form'+object.time+'\"></form>';\n\t    object.html += '<iframe data-time=\"'+object.time+'\" style=\"display:none;\" id=\"iframe'+object.time+'\" name=\"iframe'+object.time+'\"></iframe>';\n        object.html += '</div>';\n\t    cbt_dialog(object.html); \n\t\n\t    object.addParameter = function(parameter,value)\n\t    {\n\t        $(\"<input type='hidden' />\")\n\t         .attr(\"name\", parameter)\n\t         .attr(\"value\", value)\n\t         .appendTo('#form'+object.time);\n\t    }\n\t\n\t    object.send = function(callback)\n\t    {\n\t\t    cbt_import_poll_i = 0;\n\t        $('#form'+object.time).submit();\n\t        \n\t        cbt_import_poll('Loading importer');\n\t        \n\t        $('#iframe'+object.time).load(function()\n\t        {  \n\t\t        $('#cbt_popup .cbt_loader').slideUp();\n\t\t        if(callback) callback($(this).contents().find(\"body\").html());\n\t\t        //$('#form'+$(this).data('time')).remove();  $(this).remove(); \n\t\t        cbt_import_poll('<button class=\"button cbt-show-poll-log\">show log</button>', 'action');   \n\t\t\t\t$('.cbt-show-poll-log').click(function() \n\t\t\t\t{\n\t\t\t\t\t$('#cbt_popup iframe').css({width: '100%', height:'300px'}).slideToggle();\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\t\t    });\n\t    }\n\t}\n\t\n\n    \n})(jQuery);\n\n\nvar cbt_import_poll_i = 0;\nfunction cbt_import_poll(msg, type)\n{\n\tif(! type) type = 'normal';\n\tif(type=='action')\n\t{\n\t\tjQuery('#cbt_import_poll_msg').prepend('<div class=\"cbt_import_poll_msg cbt_import_poll_type_'+type+'\">'+msg+'</div>');\n\t\treturn;\n\t}\n\n    if(type=='alert')\n    {\n        alert(msg);\n        return;\n    }\n\t\n\tcbt_import_poll_i++;\n\tjQuery('#cbt_import_poll_msg').prepend('<div class=\"cbt_import_poll_msg cbt_import_poll_type_'+type+'\">'+cbt_import_poll_i+'. '+msg+'</div>');\n}\n\nfunction cbt_action_poll(action)\n{\n\tif(action=='reload') location.reload();\n}","/**\n* Filterizr is a jQuery plugin that sorts, shuffles and applies stunning filters over\n* responsive galleries using CSS3 transitions and custom CSS effects.\n*\n* @author Yiotis Kaltsikis\n* @see {@link http://yiotis.net/filterizr}\n* @version 1.2.3\n* @license MIT License\n*/\n\n(function(global, $) {\n\n    'use strict';\n\n    //Make sure jQuery exists\n    if (!$) throw new Error('Filterizr requires jQuery to work.');\n\n    /**\n    * Modified version of Jake Gordon's Bin Packing algorithm used for Filterizr's 'packed' layout\n    * @see {@link https://github.com/jakesgordon/bin-packing}\n    */\n    var Packer = function(w) {\n        this.init(w);\n    };\n\n    Packer.prototype = {\n        init: function(w) {\n            this.root = { x: 0, y: 0, w: w };\n        },\n        fit: function(blocks) {\n            var n, node, block, len = blocks.length;\n            var h = len > 0 ? blocks[0].h : 0;\n            this.root.h = h;\n            for (n = 0; n < len ; n++) {\n                block = blocks[n];\n                if ((node = this.findNode(this.root, block.w, block.h)))\n                block.fit = this.splitNode(node, block.w, block.h);\n                else\n                block.fit = this.growDown(block.w, block.h);\n            }\n        },\n        findNode: function(root, w, h) {\n            if (root.used)\n            return this.findNode(root.right, w, h) || this.findNode(root.down, w, h);\n            else if ((w <= root.w) && (h <= root.h))\n            return root;\n            else\n            return null;\n        },\n        splitNode: function(node, w, h) {\n            node.used = true;\n            node.down  = { x: node.x,     y: node.y + h, w: node.w,     h: node.h - h };\n            node.right = { x: node.x + w, y: node.y,     w: node.w - w, h: h          };\n            return node;\n        },\n        growDown: function(w, h) {\n            var node;\n            this.root = {\n                used: true,\n                x: 0,\n                y: 0,\n                w: this.root.w,\n                h: this.root.h + h,\n                down:  { x: 0, y: this.root.h, w: this.root.w, h: h },\n                right: this.root\n            };\n            if ((node = this.findNode(this.root, w, h)))\n            return this.splitNode(node, w, h);\n            else\n            return null;\n        }\n    };\n\n    /**\n    * Only Filterizr method extracted on jQuery.fn.\n    * Instantiates a new Filterizr or calls any of the public Filterizr methods.\n    * @return {jQuery} this - to facilitate jQuery method chaining.\n    */\n    $.fn.filterizr = function() {\n        var self = this, args = arguments;\n        //Create the Filterizr obj as an internal private property on the current object\n        //to serve as a private namespace\n        if (!self._fltr) {\n            self._fltr = $.fn.filterizr.prototype.init(self.selector, (typeof args[0] === 'object' ? args[0] : undefined));\n        }\n        //Call all public Filterizr methods through the private Filterizr object\n        if (typeof args[0] === 'string') {\n            if (args[0].lastIndexOf('_') > -1) throw new Error('Filterizr error: You cannot call private methods');\n            if (typeof self._fltr[args[0]] === 'function') {\n                self._fltr[args[0]](args[1], args[2]);\n            }\n            else throw new Error('Filterizr error: There is no such function');\n        }\n        return self;\n    };\n\n    /**\n    * Filterizr prototype\n    */\n    $.fn.filterizr.prototype = {\n\n        /**\n        * Filterizr constructor.\n        * @param {string} [selector] - the selector of your container.\n        * @param {Object} [options] - user options to override defaults.\n        * @constructor\n        */\n        init: function(selector, options) {\n            var self = $(selector).extend($.fn.filterizr.prototype);\n            //Default options\n            self.options = {\n                animationDuration: 0.5,\n                callbacks: {\n                    onFilteringStart: function() { },\n                    onFilteringEnd: function() { },\n                    onShufflingStart: function() { },\n                    onShufflingEnd: function() { },\n                    onSortingStart: function() { },\n                    onSortingEnd: function() { }\n                },\n                delay: 0,\n                delayMode: 'progressive',\n                easing: 'ease-out',\n                filter: 'all',\n                filterOutCss: {\n                    'opacity': 0,\n                    'transform': 'scale(0.5)'\n                },\n                filterInCss: {\n                    'opacity': 1,\n                    'transform': 'scale(1)'\n                },\n                layout: 'sameSize',\n                selector: (typeof selector === 'string') ? selector : '.filtr-container',\n                setupControls: true\n            };\n            //No arguments constructor\n            if (arguments.length === 0) {\n                selector = self.options.selector;\n                options  = self.options;\n            }\n            //One argument constructor (only options)\n            if (arguments.length === 1 && typeof arguments[0] === 'object') options = arguments[0];\n            //If options argument provided, override defaults\n            if (options) {\n                self.setOptions(options);\n            }\n            //Private properties\n            self.css({ //Cache reference to container as jQuery obj and init its CSS\n                'padding' : 0,\n                'position': 'relative'\n            });\n            self._lastCategory = 0; //Highest value in data-category of .filtr-items\n            self._isAnimating  = false;\n            self._isShuffling  = false;\n            self._isSorting    = false;\n            //.filtr-item collections\n            self._mainArray   = self._getFiltrItems();\n            self._subArrays   = self._makeSubarrays();\n            self._activeArray = self._getCollectionByFilter(self.options.filter);\n            //Used for multiple category filtering\n            self._toggledCategories = { };\n            //Used for search feature\n            self._typedText = $('input[data-search]').val() || '';\n            //Generate unique ID for resize events\n            self._uID = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n                var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n                return v.toString(16);\n            });\n            //Set up Filterizr events\n            self._setupEvents();\n            //Set up standard Filterizr controls (for multiple Filterizrs in your scene, set to false)\n            if (self.options.setupControls) self._setupControls();\n            //Start Filterizr!\n            self.filter(self.options.filter);\n            return self;\n        },\n\n        /***********************************\n        * Public methods\n        ***********************************/\n        /**\n        * Filters the items\n        * @param {number} targetFilter - the applied filter towards which items transition\n        */\n        filter: function(targetFilter) {\n            var self   = this,\n                target = self._getCollectionByFilter(targetFilter);\n\n            self.options.filter = targetFilter;\n            self.trigger('filteringStart');\n            //Filter items\n            self._handleFiltering(target);\n            //Apply search filter on top if activated\n            if (self._isSearchActivated()) self.search(self._typedText);\n        },\n\n        /**\n        * Toggles filters on/off and renders the new collection\n        * @param {number} toggledFilter - the filter to toggle\n        */\n        toggleFilter: function(toggledFilter) {\n            var self   = this,\n                target = [], i = 0;\n\n            self.trigger('filteringStart');\n            //Toggle the toggledFilter in the active categories\n            //If undefined (in case of window resize) ignore\n            if (toggledFilter) {\n                if (!self._toggledCategories[toggledFilter])\n                    self._toggledCategories[toggledFilter] = true;\n                else\n                    delete self._toggledCategories[toggledFilter];\n            }\n\n            //If a filter is toggled on then display only items belonging to that category\n            if (self._multifilterModeOn()) {\n                target = self._makeMultifilterArray();\n                //Filter items\n                self._handleFiltering(target);\n                //Apply search filter on top if activated\n                if (self._isSearchActivated()) self.search(self._typedText);\n            }\n            //If all filters toggled off then display unfiltered gallery\n            else {\n                //Filter items\n                self.filter('all');\n                //Apply search filter on top if activated\n                if (self._isSearchActivated()) self.search(self._typedText);\n            }\n        },\n\n        /**\n        * Searches the contents of .filtr-item elements, filters them and renders the results\n        * @param {string} text to search in contents of .filtr-item elements\n        */\n        search: function(text) {\n            var self   = this,\n                //get active category\n                array  = self._multifilterModeOn() ?\n                            self._makeMultifilterArray() :\n                            self._getCollectionByFilter(self.options.filter),\n                target = [], i = 0;\n\n            if (self._isSearchActivated()) {\n                for (i = 0; i < array.length; i++) {\n                    //Check if the text typed in the textbox is contained in the .filtr-item element\n                    //and add it to the target array\n                    var containsText = array[i].text().toLowerCase().indexOf(text.toLowerCase()) > -1;\n                    if (containsText) {\n                        target.push(array[i]);\n                    }\n                }\n            }\n            //Show the results\n            if (target.length > 0) {\n                self._handleFiltering(target);\n            }\n            //If there are no results\n            else {\n                //and search is activated, show blank\n                if (self._isSearchActivated()) {\n                    for (i = 0; i < self._activeArray.length; i++) {\n                        self._activeArray[i]._filterOut();\n                    }\n                }\n                //if search is not activated display gallery with last applied filter\n                else {\n                    self._handleFiltering(array);\n                }\n            }\n        },\n\n        /**\n        * Shuffles the active collection and rearranges it on screen\n        */\n        shuffle: function() {\n            var self = this;\n\n            //ShufflingStart callback\n            self._isAnimating = true;\n            self._isShuffling = true;\n            self.trigger('shufflingStart');\n\n            self._mainArray = self._fisherYatesShuffle(self._mainArray);\n            self._subArrays = self._makeSubarrays();\n\n            var target = self._multifilterModeOn() ?\n                            self._makeMultifilterArray() :\n                            self._getCollectionByFilter(self.options.filter);\n\n            if (self._isSearchActivated())\n                self.search(self._typedText);\n            else\n                self._placeItems(target);\n        },\n\n        /**\n        * Sorts the active collection and rearranges it on screen.\n        * @param {string} [attr] - attr based on which to sort (default: 'domIndex' / possible: 'domIndex', 'sortData', 'w', 'h').\n        * @param {string} [sortOrder] - asc/desc (default: 'asc').\n        */\n        sort: function(attr, sortOrder) {\n            var self  = this;\n            //Set defaults\n            attr \t  = attr      || 'domIndex';\n            sortOrder = sortOrder || 'asc';\n\n            //SortingStart callback\n            self._isAnimating = true;\n            self._isSorting   = true;\n            self.trigger('sortingStart');\n\n            //Register sort attr on all elements if it is a user-defined data-attribute\n            var isUserAttr = attr !== 'domIndex' && attr !== 'sortData' && attr !== 'w' && attr!== 'h';\n            if (isUserAttr) {\n                for (var i = 0; i < self._mainArray.length; i++) {\n                    self._mainArray[i][attr] = self._mainArray[i].data(attr);\n                }\n            }\n            //Sort items\n            self._mainArray.sort(self._comparator(attr, sortOrder));\n            self._subArrays = self._makeSubarrays();\n            //Place sorted collection to new positions\n            var target = self._multifilterModeOn() ?\n                            self._makeMultifilterArray() :\n                            self._getCollectionByFilter(self.options.filter);\n\n            if (self._isSearchActivated())\n                self.search(self._typedText);\n            else\n                self._placeItems(target);\n        },\n\n        /**\n        * Overrides the default options with the user-provided ones.\n        * @param {object} options - the user-provided options to override defaults.\n        */\n        setOptions: function(options) {\n            var self = this, i = 0;\n            //Override options\n            for (var prop in options) {\n                self.options[prop] = options[prop];\n            }\n            //If the user tries to override animationDuration, easing, delay or delayMode\n            if (self._mainArray && (options.animationDuration || options.delay || options.easing || options.delayMode)) {\n                for (i = 0; i < self._mainArray.length; i++) {\n                    self._mainArray[i].css('transition', 'all ' + self.options.animationDuration + 's ' +  self.options.easing + ' ' + self._mainArray[i]._calcDelay() + 'ms');\n                }\n            }\n            //If the user tries to override a callback, make sure undefined callbacks are set to empty functions\n            if (options.callbacks) {\n                if (!options.callbacks.onFilteringStart)\n                    self.options.callbacks.onFilteringStart = function() { };\n                if (!options.callbacks.onFilteringEnd)\n                    self.options.callbacks.onFilteringEnd = function() { };\n                if (!options.callbacks.onShufflingStart)\n                    self.options.callbacks.onShufflingStart = function() { };\n                if (!options.callbacks.onShufflingEnd)\n                    self.options.callbacks.onShufflingEnd = function() { };\n                if (!options.callbacks.onSortingStart)\n                    self.options.callbacks.onSortingStart = function() { };\n                if (!options.callbacks.onSortingEnd)\n                    self.options.callbacks.onSortingEnd = function() { };\n            }\n            //If the user has not defined a transform property in their CSS, add it\n            //while overriding, including translates for movement\n            if (!self.options.filterInCss.transform)  self.options.filterInCss.transform  = 'translate3d(0,0,0)';\n            if (!self.options.filterOutCss.transform) self.options.filterOutCss.transform = 'translate3d(0,0,0)';\n        },\n\n        /***********************************\n        * Private & helper methods\n        ***********************************/\n        /**\n        * Finds all .filtr-item elements in the .filtr-container and sets them up before returning them in an array.\n        * @return {Object[]}  all .filtr-item elements contained in Filterizr's container.\n        * @private\n        */\n        _getFiltrItems: function() {\n            var self       = this,\n            filtrItems = $(self.find('.filtr-item')),\n            itemsArray = [];\n\n            $.each(filtrItems, function(i, e) {\n                //Set item up as Filtr object & push to array\n                var item = $(e).extend(FiltrItemProto)._init(i, self);\n                itemsArray.push(item);\n            });\n            return itemsArray;\n        },\n\n        /**\n        * Divide .filtr-item elements into sub-arrays based on data-category attribute.\n        * @return {Object[Object[self._lastCategory]]} Array of arrays including items grouped by data-category.\n        * @private\n        */\n        _makeSubarrays: function() {\n            var self = this,\n            subArrays = [];\n\n            for (var i = 0; i < self._lastCategory; i++) subArrays.push([]);\n\n            //Populate the sub-arrays\n            for (i = 0; i < self._mainArray.length; i++) {\n                //Multiple categories scenario\n                if (typeof self._mainArray[i]._category === 'object') {\n                    var length = self._mainArray[i]._category.length;\n                    for (var x = 0; x < length; x++) {\n                        subArrays[self._mainArray[i]._category[x] - 1].push(self._mainArray[i]);\n                    }\n                }\n                //Single category\n                else subArrays[self._mainArray[i]._category - 1].push(self._mainArray[i]);\n            }\n            return subArrays;\n        },\n\n        /**\n        * Make a .filtr-item array based on the activated filters\n        * @return {Object[]} array consisting of the .filtr-item elements belonging to active filters\n        * @private\n        */\n        _makeMultifilterArray: function() {\n            var self   = this,\n                target = [], addedMap = {};\n\n            for (var i = 0; i < self._mainArray.length; i++) {\n                //If the item belongs to multiple categories\n                var item = self._mainArray[i],\n                    belongsToCategory = false,\n                    isUnique = item.domIndex in addedMap === false;\n                //Check if item belongs to categories whose filters are toggled on\n                if (Array.isArray(item._category)) {\n                    for (var x = 0; x < item._category.length; x++) {\n                        if (item._category[x] in self._toggledCategories) {\n                            belongsToCategory = true;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (item._category in self._toggledCategories) belongsToCategory = true;\n                }\n                //If the item is not already visible and belongs to a category\n                //of the toggled on filters push it to target collection\n                if (isUnique && belongsToCategory) {\n                    addedMap[item.domIndex] = true;\n                    target.push(item);\n                }\n            }\n            return target;\n        },\n\n        /**\n        * Detect and set up preset controls.\n        * @private\n        */\n        _setupControls: function() {\n            var self = this;\n            //Filter controls\n            $('*[data-filter]').click(function() {\n                var targetFilter = $(this).data('filter');\n                //Exit case\n                if (self.options.filter === targetFilter) return;\n                self.filter(targetFilter);\n            });\n            //Multiple filter controls\n            $('*[data-multifilter]').click(function() {\n                var targetFilter = $(this).data('multifilter');\n                if (targetFilter === 'all') {\n                    self._toggledCategories = { };\n                    self.filter('all');\n                }\n                else {\n                    self.toggleFilter(targetFilter);\n                }\n            });\n            //Shuffle control\n            $('*[data-shuffle]').click(function() {\n                self.shuffle();\n            });\n            //Sort controls\n            $('*[data-sortAsc]').click(function() {\n                var sortAttr = $('*[data-sortOrder]').val();\n                self.sort(sortAttr, 'asc');\n            });\n            $('*[data-sortDesc]').click(function() {\n                var sortAttr = $('*[data-sortOrder]').val();\n                self.sort(sortAttr, 'desc');\n            });\n            //Search control\n            $('input[data-search]').keyup(function() {\n                self._typedText = $(this).val();\n                self._delayEvent(function() {\n                    self.search(self._typedText);\n                }, 250, self._uID);\n            });\n        },\n\n        /**\n        * Set up window and Filterizr events.\n        * @private\n        */\n        _setupEvents: function() {\n            var self = this;\n            //Window resize event\n            $(global).resize(function() {\n                self._delayEvent(function() {\n                    self.trigger('resizeFiltrContainer');\n                }, 250, self._uID);\n            });\n            //Filterizr events\n            self\n            //Container resize event\n            .on('resizeFiltrContainer', function() {\n                if (self._multifilterModeOn())\n                    self.toggleFilter();\n                else\n                    self.filter(self.options.filter);\n            })\n            //onFilteringStart event\n            .on('filteringStart', function() {\n                self.options.callbacks.onFilteringStart();\n            })\n            //onFilteringEnd event\n            .on('filteringEnd', function() {\n                self.options.callbacks.onFilteringEnd();\n            })\n            //onShufflingStart event\n            .on('shufflingStart', function() {\n                self._isShuffling = true;\n                self.options.callbacks.onShufflingStart();\n            })\n            //onFilteringEnd event\n            .on('shufflingEnd', function() {\n                self.options.callbacks.onShufflingEnd();\n                self._isShuffling = false;\n            })\n            //onSortingStart event\n            .on('sortingStart', function() {\n                self._isSorting = true;\n                self.options.callbacks.onSortingStart();\n            })\n            //onSortingEnd event\n            .on('sortingEnd', function() {\n                self.options.callbacks.onSortingEnd();\n                self._isSorting = false;\n            });\n        },\n\n        /**\n        * Calculates the final positions of items being filtered in, updates the height of .filtr-container.\n        * @return {Object[]} array of future item positions.\n        * @private\n        */\n        _calcItemPositions: function() {\n            var self  = this,\n                array = self._activeArray,\n            //Container data\n            containerHeight = 0,\n            cols = Math.round(self.width() / self.find('.filtr-item').outerWidth()),\n            rows = 0,\n            //Item data\n            itemWidth  = array[0].outerWidth(),\n            itemHeight = 0,\n            //Position calculation vars\n            left = 0, top = 0,\n            //Loop vars\n            i = 0, x = 0,\n            //Array of positions to return\n            posArray = [];\n\n            //Layout for items of varying sizes\n            if (self.options.layout === 'packed') {\n                //Cache current item width/height\n                $.each(self._activeArray, function(i, e) {\n                    e._updateDimensions();\n                });\n                //Instantiate new Packer, set up grid\n                var packer = new Packer(self.outerWidth());\n                packer.fit(self._activeArray);\n                for (i = 0; i < array.length; i++) {\n                    posArray.push({\n                        left: array[i].fit.x,\n                        top: array[i].fit.y\n                    });\n                }\n                containerHeight = packer.root.h;\n            }\n            //Horizontal layout\n            if (self.options.layout === 'horizontal') {\n                rows = 1;\n                for (i = 1; i <= array.length; i++) {\n                    itemWidth = array[i - 1].outerWidth();\n                    itemHeight = array[i - 1].outerHeight();\n                    posArray.push({\n                        left: left,\n                        top: top\n                    });\n                    left += itemWidth;\n                    if (containerHeight < itemHeight) containerHeight = itemHeight;\n                }\n            }\n            //Vertical layout\n            else if (self.options.layout === 'vertical') {\n                for (i = 1; i <= array.length; i++) {\n                    itemHeight = array[i - 1].outerHeight();\n                    posArray.push({\n                        left: left,\n                        top: top\n                    });\n                    top += itemHeight;\n                }\n                containerHeight = top;\n            }\n            //Layout of items for same height and varying width\n            else if (self.options.layout === 'sameHeight') {\n                rows = 1;\n                var rowWidth = self.outerWidth();\n                for (i = 1; i <= array.length; i++) {\n                    itemWidth = array[i - 1].width();\n                    var itemOuterWidth = array[i - 1].outerWidth(),\n                    nextItemWidth = 0;\n                    if (array[i]) nextItemWidth = array[i].width();\n                    posArray.push({\n                        left: left,\n                        top: top\n                    });\n                    x = left + itemWidth + nextItemWidth;\n                    if (x > rowWidth) {\n                        x \t = 0;\n                        left = 0;\n                        top  += array[0].outerHeight();\n                        rows++;\n                    }\n                    else left += itemOuterWidth;\n                }\n                containerHeight = rows * array[0].outerHeight();\n            }\n            //Layout for items of same width and varying height\n            else if (self.options.layout === 'sameWidth') {\n                //Get positions\n                for (i = 1; i <= array.length; i++) {\n                    posArray.push({\n                        left: left,\n                        top: top\n                    });\n                    if (i % cols === 0) rows++;\n                    left += itemWidth;\n                    top = 0;\n                    if (rows > 0) {\n                        x = rows;\n                        while (x > 0) {\n                            top += array[i - (cols * x)].outerHeight();\n                            x--;\n                        }\n                    }\n                    if (i % cols === 0) left = 0;\n                }\n                //Calculate containerHeight\n                for (i = 0; i < cols; i++) {\n                    var columnHeight = 0, index = i;\n                    while(array[index]) {\n                        columnHeight += array[index].outerHeight();\n                        index += cols;\n                    }\n                    if (columnHeight > containerHeight) {\n                        containerHeight = columnHeight;\n                        columnHeight = 0;\n                    }\n                    else\n                    columnHeight = 0;\n                }\n            }\n            //Layout for items of exactly same size\n            else if (self.options.layout === 'sameSize') {\n                for (i = 1; i <= array.length; i++) {\n                    //Push first point at (left: 0, top: 0)\n                    posArray.push({\n                        left: left,\n                        top: top\n                    });\n                    //Set left and top properties for next point before next iteration\n                    left += itemWidth;\n                    //On row change calc new top and reset left\n                    if (i % cols === 0) {\n                        top += array[0].outerHeight();\n                        left = 0;\n                    }\n                }\n                rows = Math.ceil(array.length / cols);\n                containerHeight = rows * array[0].outerHeight();\n            }\n            //Update the height of .filtr-container based on new positions\n            self.css('height', containerHeight);\n            return posArray;\n        },\n\n        /**\n        * Handles filtering in/out and reposition items when transition between categories\n        * @param {Object[]} the target array towards which to filter\n        * @private\n        */\n        _handleFiltering: function(target) {\n            var self = this,\n                toFilterOut = self._getArrayOfUniqueItems(self._activeArray, target);\n            //Minimize all .filtr-item elements that are not the same between categories\n            for (var i = 0; i < toFilterOut.length; i++) {\n                toFilterOut[i]._filterOut();\n            }\n            self._activeArray = target;\n            //Reposition same items and filter in new\n            self._placeItems(target);\n        },\n\n        /**\n        * Determines if the user is using data-multifilter controls or simple data-filter controls\n        * @return {boolean} indicating whether multiple filter mode is on\n        * @private\n        */\n        _multifilterModeOn: function() {\n            var self = this;\n            return Object.keys(self._toggledCategories).length > 0;\n        },\n\n        /**\n        * Determines if the user has something typed in the search box\n        * @return {boolean} indicating whether the user has searched\n        * @private\n        */\n        _isSearchActivated: function() {\n            var self = this;\n            return self._typedText.length > 0;\n        },\n\n        /**\n        * Places .filtr-item elements on the grid positions\n        * @param {Object[]} arr - an array consisting of .filtr-item elements\n        * @private\n        */\n        _placeItems: function(arr) {\n            var self = this;\n            //Tag gallery state as animating\n            self._isAnimating = true;\n            //Recalculate positions and filter in items\n            self._itemPositions = self._calcItemPositions();\n            for (var i = 0; i < arr.length; i++) {\n                arr[i]._filterIn(self._itemPositions[i]);\n            }\n        },\n\n        /**\n        * Returns item collection based on a certain filter\n        * @param {string|number} filter of category to return\n        * @return {Object[]} one of the item collections based on filter\n        * @private\n        */\n        _getCollectionByFilter: function(filter) {\n            var self = this;\n            return filter === 'all' ? self._mainArray : self._subArrays[filter - 1];\n        },\n\n        /**\n        * Used to make deep copies of the predefined filters\n        * in the options for the filterIn/Out methods of items.\n        * @see _filterIn and _filterOut methods in FiltrItemProto.\n        * @param {Object} obj - is the source object to make a deep copy from.\n        * @return {Object} Deep copy of the obj param.\n        * @private\n        */\n        _makeDeepCopy: function(obj) {\n            var r = {};\n            for (var p in obj) r[p] = obj[p];\n            return r;\n        },\n\n        /**\n        * Comparator factory used to produce camparers for sorting.\n        * @see Filterizr.prototype.sort.\n        * @param {string} prop - property based on which to sort ('domIndex', 'sortData', 'w', 'h')\n        * @param {string} sortOrder - 'asc'/'desc'\n        * @return {function} comparer which takes arguments\n        * @private\n        */\n        _comparator: function(prop, sortOrder) {\n            return function(a, b) {\n                if (sortOrder === 'asc') {\n                    if (a[prop] < b[prop])\n                    return -1;\n                    else if (a[prop] > b[prop])\n                    return 1;\n                    else\n                    return 0;\n                }\n                else if (sortOrder === 'desc') {\n                    if (b[prop] < a[prop])\n                    return -1;\n                    else if (b[prop] > a[prop])\n                    return 1;\n                    else\n                    return 0;\n                }\n            };\n        },\n\n        /**\n        * Modified version of Jeffery To's array intersection method\n        * @see {@link http://www.falsepositives.com/index.php/2009/12/01/javascript-function-to-get-the-intersect-of-2-arrays/}\n        * @return {Object[]} a disjoint array containing the elements of the first array not found in the second\n        * @private\n        */\n        _getArrayOfUniqueItems: function(arr1, arr2) {\n            var r = [], o = {}, l = arr2.length, i, v;\n            for (i = 0; i < l; i++) {\n                o[arr2[i].domIndex] = true;\n            }\n            l = arr1.length;\n            for (i = 0; i < l; i++) {\n                v = arr1[i];\n                if (!(v.domIndex in o)) {\n                    r.push(v);\n                }\n            }\n            return r;\n        },\n\n        /**\n        * Brahn's take on CMS's solution to calling the window.resize event at set\n        * intervals in multiple places in the code using a Java-like UUID with a regexp\n        * @see {@link http://stackoverflow.com/questions/2854407/javascript-jquery-window-resize-how-to-fire-after-the-resize-is-completed}\n        * @return {function} which calls the callback or just clears the timer\n        * @private\n        */\n        _delayEvent: (function () {\n            var self = this, timers = {};\n            return function (callback, ms, uniqueId) {\n                if (uniqueId === null) {\n                    throw Error(\"UniqueID needed\");\n                }\n                if (timers[uniqueId]) {\n                    clearTimeout (timers[uniqueId]);\n                }\n                timers[uniqueId] = setTimeout(callback, ms);\n            };\n        })(),\n\n        /**\n        * Fisher-Yates array shuffling algorithm implemented for JavaScript.\n        * @return {Object[]} shuffled array.\n        * @private\n        */\n        _fisherYatesShuffle: function shuffle(array) {\n            var m = array.length, t, i;\n            // While there remain elements to shuffle…\n            while (m) {\n                // Pick a remaining element…\n                i = Math.floor(Math.random() * m--);\n                // And swap it with the current element.\n                t = array[m];\n                array[m] = array[i];\n                array[i] = t;\n            }\n            return array;\n        }\n    };\n\n    /**\n    * FiltrItem Prototype\n    */\n    var FiltrItemProto = {\n\n        /**\n        * Transforms a jQuery item with .filtr-item class into a FiltrItem.\n        * @param {number} index - initial item order based on position in DOM.\n        * @param {Filterizr} parent - reference to Filterizr container containing this Filtr Item.\n        * @return {jQuery} this - to facilitate method chaining.\n        * @constructor\n        */\n        _init: function(index, parent) {\n            var self = this, delay = 0;\n            //Private item properties\n            self._parent   = parent;\t\t\t  //Ref to parent Filterizr object\n            self._category = self._getCategory(); //data-category values\n            self._lastPos  = {};\t\t\t\t  //Used for animations\n            //Public properties - used for sorting\n            self.domIndex = index;\n            self.sortData = self.data('sort');\n            //Item Dimensions used for Bin Packing algorithm (packed layout) and sorting.\n            self.w = 0;\n            self.h = 0;\n            //self states\n            self._isFilteredOut = true;\n            self._filteringOut  = false;\n            self._filteringIn   = false;\n            //Determine delay & set initial item styles\n            self.css(parent.options.filterOutCss)\n            .css({\n                '-webkit-backface-visibility': 'hidden',\n                'perspective': '1000px',\n                '-webkit-perspective': '1000px',\n                '-webkit-transform-style': 'preserve-3d',\n                'position': 'absolute',\n                'transition': 'all ' + parent.options.animationDuration + 's ' + parent.options.easing + ' ' + self._calcDelay() + 'ms'\n            });\n            //Events\n            self.on(\"transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd\", function(){\n                self._onTransitionEnd();\n            });\n            return self;\n        },\n\n        /**\n        * Updates the dimensions (width/height) of the item.\n        * @private\n        */\n        _updateDimensions: function() {\n            var self = this;\n            self.w = self.outerWidth();\n            self.h = self.outerHeight();\n        },\n\n        /**\n        * Calculates and returns the value of delay to apply to transition-delay in ms, depending on delayMode\n        * @return {number} value to apply to transition-delay in ms.\n        * @private\n        */\n        _calcDelay: function() {\n            var self = this, r = 0;\n            if (self._parent.options.delayMode === 'progressive')\n            r = self._parent.options.delay * self.domIndex;\n            else\n            if (self.domIndex % 2 === 0) r = self._parent.options.delay;\n            return r;\n        },\n\n        /**\n        * Determines which categories this items belongs to and updates the _lastCategory prop of Filterizr.\n        * @throws {InvalidArgumentException} data-category of .filtr-item elements must be integer or string of integers delimited by ', '\n        * @return {Object[]|number} the categories this item belongs to.\n        * @private\n        */\n        _getCategory: function() {\n            var self = this,\n                ret  = self.data('category');\n            //If more than one category provided\n            if (typeof ret === 'string') {\n                ret = ret.split(', ');\n                for (var i = 0; i < ret.length; i++) {\n                    //Error checking: make sure data-category has an integer as its value\n                    if (isNaN(parseInt(ret[i]))) {\n                        throw new Error('Filterizr: the value of data-category must be a number, starting from value 1 and increasing.');\n                    }\n                    if (parseInt(ret[i]) > self._parent._lastCategory) {\n                        self._parent._lastCategory = parseInt(ret[i]);\n                    }\n                }\n            }\n            else {\n                if (ret > self._parent._lastCategory)\n                    self._parent._lastCategory = ret;\n            }\n            return ret;\n        },\n\n        /**\n        * Handles the transitionEnd event.\n        * @private\n        */\n        _onTransitionEnd: function() {\n            var self = this;\n            //finished filtering out\n            if (self._filteringOut) {\n                $(self).addClass('filteredOut');\n                self._isFilteredOut = true;\n                self._filteringOut  = false;\n            }\n            //finished filtering in\n            else if (self._filteringIn) {\n                self._isFilteredOut = false;\n                self._filteringIn \t= false;\n            }\n            //if animating trigger filteringEnd event once on parent\n            if (self._parent._isAnimating) {\n                if (self._parent._isShuffling)\n                    self._parent.trigger('shufflingEnd');\n                else if (self._parent._isSorting)\n                    self._parent.trigger('sortingEnd');\n                else\n                    self._parent.trigger('filteringEnd');\n                self._parent._isAnimating = false;\n            }\n        },\n\n        /**\n        * Filters out the item.\n        * @private\n        */\n        _filterOut: function() {\n            var self         = this,\n                filterOutCss = self._parent._makeDeepCopy(self._parent.options.filterOutCss);\n            //Auto add translate to transform over user-defined filterOut styles\n            filterOutCss.transform += ' translate3d(' + self._lastPos.left + 'px,' + self._lastPos.top + 'px, 0)';\n            //Play animation\n            self.css(filterOutCss);\n            //Make unclickable\n            self.css('pointer-events', 'none');\n            //Tag as filteringOut for transitionend event\n            self._filteringOut = true;\n        },\n\n        /**\n        * Filters in the item.\n        * @param {Object} targetPos - is the position to move to with transform-translate\n        * @private\n        */\n        _filterIn: function(targetPos) {\n            var self        = this,\n                filterInCss = self._parent._makeDeepCopy(self._parent.options.filterInCss);\n            //Remove the filteredOut class\n            $(self).removeClass('filteredOut');\n            //Tag as filtering in for transitionend event\n            self._filteringIn = true;\n            self._lastPos     = targetPos;\n            //Make clickable\n            self.css('pointer-events', 'auto');\n            //Auto add translate to transform over user-defined filterIn styles\n            filterInCss.transform += ' translate3d(' + targetPos.left + 'px,' + targetPos.top + 'px, 0)';\n            //Play animation\n            self.css(filterInCss);\n        }\n    };\n\n})(this, jQuery);\n"]}