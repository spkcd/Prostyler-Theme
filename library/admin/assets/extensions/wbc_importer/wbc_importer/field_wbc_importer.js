function cbt_import_poll(t,e){return e||(e="normal"),"action"==e?void jQuery("#cbt_import_poll_msg").prepend('<div class="cbt_import_poll_msg cbt_import_poll_type_'+e+'">'+t+"</div>"):"alert"==e?void alert(t):(cbt_import_poll_i++,void jQuery("#cbt_import_poll_msg").prepend('<div class="cbt_import_poll_msg cbt_import_poll_type_'+e+'">'+cbt_import_poll_i+". "+t+"</div>"))}function cbt_action_poll(t){"reload"==t&&location.reload()}!function(t,e){"use strict";if(!e)throw new Error("Filterizr requires jQuery to work.");var i=function(t){this.init(t)};i.prototype={init:function(t){this.root={x:0,y:0,w:t}},fit:function(t){var e,i,r,o=t.length,n=o>0?t[0].h:0;for(this.root.h=n,e=0;e<o;e++)r=t[e],(i=this.findNode(this.root,r.w,r.h))?r.fit=this.splitNode(i,r.w,r.h):r.fit=this.growDown(r.w,r.h)},findNode:function(t,e,i){return t.used?this.findNode(t.right,e,i)||this.findNode(t.down,e,i):e<=t.w&&i<=t.h?t:null},splitNode:function(t,e,i){return t.used=!0,t.down={x:t.x,y:t.y+i,w:t.w,h:t.h-i},t.right={x:t.x+e,y:t.y,w:t.w-e,h:i},t},growDown:function(t,e){var i;return this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+e,down:{x:0,y:this.root.h,w:this.root.w,h:e},right:this.root},(i=this.findNode(this.root,t,e))?this.splitNode(i,t,e):null}},e.fn.filterizr=function(){var t=this,i=arguments;if(t._fltr||(t._fltr=e.fn.filterizr.prototype.init(t.selector,"object"==typeof i[0]?i[0]:void 0)),"string"==typeof i[0]){if(i[0].lastIndexOf("_")>-1)throw new Error("Filterizr error: You cannot call private methods");if("function"!=typeof t._fltr[i[0]])throw new Error("Filterizr error: There is no such function");t._fltr[i[0]](i[1],i[2])}return t},e.fn.filterizr.prototype={init:function(t,i){var r=e(t).extend(e.fn.filterizr.prototype);return r.options={animationDuration:.5,callbacks:{onFilteringStart:function(){},onFilteringEnd:function(){},onShufflingStart:function(){},onShufflingEnd:function(){},onSortingStart:function(){},onSortingEnd:function(){}},delay:0,delayMode:"progressive",easing:"ease-out",filter:"all",filterOutCss:{opacity:0,transform:"scale(0.5)"},filterInCss:{opacity:1,transform:"scale(1)"},layout:"sameSize",selector:"string"==typeof t?t:".filtr-container",setupControls:!0},0===arguments.length&&(t=r.options.selector,i=r.options),1===arguments.length&&"object"==typeof arguments[0]&&(i=arguments[0]),i&&r.setOptions(i),r.css({padding:0,position:"relative"}),r._lastCategory=0,r._isAnimating=!1,r._isShuffling=!1,r._isSorting=!1,r._mainArray=r._getFiltrItems(),r._subArrays=r._makeSubarrays(),r._activeArray=r._getCollectionByFilter(r.options.filter),r._toggledCategories={},r._typedText=e("input[data-search]").val()||"",r._uID="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),r._setupEvents(),r.options.setupControls&&r._setupControls(),r.filter(r.options.filter),r},filter:function(t){var e=this,i=e._getCollectionByFilter(t);e.options.filter=t,e.trigger("filteringStart"),e._handleFiltering(i),e._isSearchActivated()&&e.search(e._typedText)},toggleFilter:function(t){var e=this,i=[];e.trigger("filteringStart"),t&&(e._toggledCategories[t]?delete e._toggledCategories[t]:e._toggledCategories[t]=!0),e._multifilterModeOn()?(i=e._makeMultifilterArray(),e._handleFiltering(i),e._isSearchActivated()&&e.search(e._typedText)):(e.filter("all"),e._isSearchActivated()&&e.search(e._typedText))},search:function(t){var e=this,i=e._multifilterModeOn()?e._makeMultifilterArray():e._getCollectionByFilter(e.options.filter),r=[],o=0;if(e._isSearchActivated())for(o=0;o<i.length;o++){var n=i[o].text().toLowerCase().indexOf(t.toLowerCase())>-1;n&&r.push(i[o])}if(r.length>0)e._handleFiltering(r);else if(e._isSearchActivated())for(o=0;o<e._activeArray.length;o++)e._activeArray[o]._filterOut();else e._handleFiltering(i)},shuffle:function(){var t=this;t._isAnimating=!0,t._isShuffling=!0,t.trigger("shufflingStart"),t._mainArray=t._fisherYatesShuffle(t._mainArray),t._subArrays=t._makeSubarrays();var e=t._multifilterModeOn()?t._makeMultifilterArray():t._getCollectionByFilter(t.options.filter);t._isSearchActivated()?t.search(t._typedText):t._placeItems(e)},sort:function(t,e){var i=this;if(t=t||"domIndex",e=e||"asc",i._isAnimating=!0,i._isSorting=!0,i.trigger("sortingStart"),"domIndex"!==t&&"sortData"!==t&&"w"!==t&&"h"!==t)for(var r=0;r<i._mainArray.length;r++)i._mainArray[r][t]=i._mainArray[r].data(t);i._mainArray.sort(i._comparator(t,e)),i._subArrays=i._makeSubarrays();var o=i._multifilterModeOn()?i._makeMultifilterArray():i._getCollectionByFilter(i.options.filter);i._isSearchActivated()?i.search(i._typedText):i._placeItems(o)},setOptions:function(t){var e=this,i=0;for(var r in t)e.options[r]=t[r];if(e._mainArray&&(t.animationDuration||t.delay||t.easing||t.delayMode))for(i=0;i<e._mainArray.length;i++)e._mainArray[i].css("transition","all "+e.options.animationDuration+"s "+e.options.easing+" "+e._mainArray[i]._calcDelay()+"ms");t.callbacks&&(t.callbacks.onFilteringStart||(e.options.callbacks.onFilteringStart=function(){}),t.callbacks.onFilteringEnd||(e.options.callbacks.onFilteringEnd=function(){}),t.callbacks.onShufflingStart||(e.options.callbacks.onShufflingStart=function(){}),t.callbacks.onShufflingEnd||(e.options.callbacks.onShufflingEnd=function(){}),t.callbacks.onSortingStart||(e.options.callbacks.onSortingStart=function(){}),t.callbacks.onSortingEnd||(e.options.callbacks.onSortingEnd=function(){})),e.options.filterInCss.transform||(e.options.filterInCss.transform="translate3d(0,0,0)"),e.options.filterOutCss.transform||(e.options.filterOutCss.transform="translate3d(0,0,0)")},_getFiltrItems:function(){var t=this,i=e(t.find(".filtr-item")),o=[];return e.each(i,function(i,n){var a=e(n).extend(r)._init(i,t);o.push(a)}),o},_makeSubarrays:function(){for(var t=this,e=[],i=0;i<t._lastCategory;i++)e.push([]);for(i=0;i<t._mainArray.length;i++)if("object"==typeof t._mainArray[i]._category)for(var r=t._mainArray[i]._category.length,o=0;o<r;o++)e[t._mainArray[i]._category[o]-1].push(t._mainArray[i]);else e[t._mainArray[i]._category-1].push(t._mainArray[i]);return e},_makeMultifilterArray:function(){for(var t=this,e=[],i={},r=0;r<t._mainArray.length;r++){var o=t._mainArray[r],n=!1,a=o.domIndex in i==!1;if(Array.isArray(o._category)){for(var s=0;s<o._category.length;s++)if(o._category[s]in t._toggledCategories){n=!0;break}}else o._category in t._toggledCategories&&(n=!0);a&&n&&(i[o.domIndex]=!0,e.push(o))}return e},_setupControls:function(){var t=this;e("*[data-filter]").click(function(){var i=e(this).data("filter");t.options.filter!==i&&t.filter(i)}),e("*[data-multifilter]").click(function(){var i=e(this).data("multifilter");"all"===i?(t._toggledCategories={},t.filter("all")):t.toggleFilter(i)}),e("*[data-shuffle]").click(function(){t.shuffle()}),e("*[data-sortAsc]").click(function(){var i=e("*[data-sortOrder]").val();t.sort(i,"asc")}),e("*[data-sortDesc]").click(function(){var i=e("*[data-sortOrder]").val();t.sort(i,"desc")}),e("input[data-search]").keyup(function(){t._typedText=e(this).val(),t._delayEvent(function(){t.search(t._typedText)},250,t._uID)})},_setupEvents:function(){var i=this;e(t).resize(function(){i._delayEvent(function(){i.trigger("resizeFiltrContainer")},250,i._uID)}),i.on("resizeFiltrContainer",function(){i._multifilterModeOn()?i.toggleFilter():i.filter(i.options.filter)}).on("filteringStart",function(){i.options.callbacks.onFilteringStart()}).on("filteringEnd",function(){i.options.callbacks.onFilteringEnd()}).on("shufflingStart",function(){i._isShuffling=!0,i.options.callbacks.onShufflingStart()}).on("shufflingEnd",function(){i.options.callbacks.onShufflingEnd(),i._isShuffling=!1}).on("sortingStart",function(){i._isSorting=!0,i.options.callbacks.onSortingStart()}).on("sortingEnd",function(){i.options.callbacks.onSortingEnd(),i._isSorting=!1})},_calcItemPositions:function(){var t=this,r=t._activeArray,o=0,n=Math.round(t.width()/t.find(".filtr-item").outerWidth()),a=0,s=r[0].outerWidth(),l=0,c=0,d=0,p=0,f=0,u=[];if("packed"===t.options.layout){e.each(t._activeArray,function(t,e){e._updateDimensions()});var m=new i(t.outerWidth());for(m.fit(t._activeArray),p=0;p<r.length;p++)u.push({left:r[p].fit.x,top:r[p].fit.y});o=m.root.h}if("horizontal"===t.options.layout)for(a=1,p=1;p<=r.length;p++)s=r[p-1].outerWidth(),l=r[p-1].outerHeight(),u.push({left:c,top:d}),c+=s,o<l&&(o=l);else if("vertical"===t.options.layout){for(p=1;p<=r.length;p++)l=r[p-1].outerHeight(),u.push({left:c,top:d}),d+=l;o=d}else if("sameHeight"===t.options.layout){a=1;var _=t.outerWidth();for(p=1;p<=r.length;p++){s=r[p-1].width();var h=r[p-1].outerWidth(),g=0;r[p]&&(g=r[p].width()),u.push({left:c,top:d}),f=c+s+g,f>_?(f=0,c=0,d+=r[0].outerHeight(),a++):c+=h}o=a*r[0].outerHeight()}else if("sameWidth"===t.options.layout){for(p=1;p<=r.length;p++){if(u.push({left:c,top:d}),p%n==0&&a++,c+=s,d=0,a>0)for(f=a;f>0;)d+=r[p-n*f].outerHeight(),f--;p%n==0&&(c=0)}for(p=0;p<n;p++){for(var y=0,b=p;r[b];)y+=r[b].outerHeight(),b+=n;y>o?(o=y,y=0):y=0}}else if("sameSize"===t.options.layout){for(p=1;p<=r.length;p++)u.push({left:c,top:d}),c+=s,p%n==0&&(d+=r[0].outerHeight(),c=0);a=Math.ceil(r.length/n),o=a*r[0].outerHeight()}return t.css("height",o),u},_handleFiltering:function(t){for(var e=this,i=e._getArrayOfUniqueItems(e._activeArray,t),r=0;r<i.length;r++)i[r]._filterOut();e._activeArray=t,e._placeItems(t)},_multifilterModeOn:function(){var t=this;return Object.keys(t._toggledCategories).length>0},_isSearchActivated:function(){return this._typedText.length>0},_placeItems:function(t){var e=this;e._isAnimating=!0,e._itemPositions=e._calcItemPositions();for(var i=0;i<t.length;i++)t[i]._filterIn(e._itemPositions[i])},_getCollectionByFilter:function(t){var e=this;return"all"===t?e._mainArray:e._subArrays[t-1]},_makeDeepCopy:function(t){var e={};for(var i in t)e[i]=t[i];return e},_comparator:function(t,e){return function(i,r){return"asc"===e?i[t]<r[t]?-1:i[t]>r[t]?1:0:"desc"===e?r[t]<i[t]?-1:r[t]>i[t]?1:0:void 0}},_getArrayOfUniqueItems:function(t,e){var i,r,o=[],n={},a=e.length;for(i=0;i<a;i++)n[e[i].domIndex]=!0;for(a=t.length,i=0;i<a;i++)r=t[i],r.domIndex in n||o.push(r);return o},_delayEvent:function(){var t={};return function(e,i,r){if(null===r)throw Error("UniqueID needed");t[r]&&clearTimeout(t[r]),t[r]=setTimeout(e,i)}}(),_fisherYatesShuffle:function(t){for(var e,i,r=t.length;r;)i=Math.floor(Math.random()*r--),e=t[r],t[r]=t[i],t[i]=e;return t}};var r={_init:function(t,e){var i=this;return i._parent=e,i._category=i._getCategory(),i._lastPos={},i.domIndex=t,i.sortData=i.data("sort"),i.w=0,i.h=0,i._isFilteredOut=!0,i._filteringOut=!1,i._filteringIn=!1,i.css(e.options.filterOutCss).css({"-webkit-backface-visibility":"hidden",perspective:"1000px","-webkit-perspective":"1000px","-webkit-transform-style":"preserve-3d",position:"absolute",transition:"all "+e.options.animationDuration+"s "+e.options.easing+" "+i._calcDelay()+"ms"}),i.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){i._onTransitionEnd()}),i},_updateDimensions:function(){var t=this;t.w=t.outerWidth(),t.h=t.outerHeight()},_calcDelay:function(){var t=this,e=0;return"progressive"===t._parent.options.delayMode?e=t._parent.options.delay*t.domIndex:t.domIndex%2==0&&(e=t._parent.options.delay),e},_getCategory:function(){var t=this,e=t.data("category");if("string"==typeof e){e=e.split(", ");for(var i=0;i<e.length;i++){if(isNaN(parseInt(e[i])))throw new Error("Filterizr: the value of data-category must be a number, starting from value 1 and increasing.");parseInt(e[i])>t._parent._lastCategory&&(t._parent._lastCategory=parseInt(e[i]))}}else e>t._parent._lastCategory&&(t._parent._lastCategory=e);return e},_onTransitionEnd:function(){var t=this;t._filteringOut?(e(t).addClass("filteredOut"),t._isFilteredOut=!0,t._filteringOut=!1):t._filteringIn&&(t._isFilteredOut=!1,t._filteringIn=!1),t._parent._isAnimating&&(t._parent._isShuffling?t._parent.trigger("shufflingEnd"):t._parent._isSorting?t._parent.trigger("sortingEnd"):t._parent.trigger("filteringEnd"),t._parent._isAnimating=!1)},_filterOut:function(){var t=this,e=t._parent._makeDeepCopy(t._parent.options.filterOutCss);e.transform+=" translate3d("+t._lastPos.left+"px,"+t._lastPos.top+"px, 0)",t.css(e),t.css("pointer-events","none"),t._filteringOut=!0},_filterIn:function(t){var i=this,r=i._parent._makeDeepCopy(i._parent.options.filterInCss);e(i).removeClass("filteredOut"),i._filteringIn=!0,i._lastPos=t,i.css("pointer-events","auto"),r.transform+=" translate3d("+t.left+"px,"+t.top+"px, 0)",i.css(r)}}}(this,jQuery),function(t){"use strict";function e(t){var e=jQuery(t).data();e.action="cbt_uninstall_demo",e.demo_id=t.attr("id"),t.find(".spinner").css("display","inline-block"),t.removeClass("active"),t.find(".wbc_image").css("opacity","0.5"),jQuery.post(ajaxurl,e,function(e){t.find(".wbc_image").css("opacity","1"),t.find(".spinner").css("display","none"),e.length>0&&e.match(/successfully uninstalled/gi)?(alert(e),location.reload()):(t.addClass("active"),alert(e))})}function i(e){var i=this;i.time=(new Date).getTime(),i.html='<div class="cbt_importer_dialog">',i.html+='<div class="cbt_loader"></div><div class="notice notice-info"><p>Please be patient. Import can take upto 10 minutes depending on your server speed.</p></div>',i.html+='<div id="cbt_import_poll_msg_frame"><div id="cbt_import_poll_msg"></div></div>',i.html+='<form action="'+e+'" target="iframe'+i.time+'" method="post" style="display:none;" id="form'+i.time+'"></form>',i.html+='<iframe data-time="'+i.time+'" style="display:none;" id="iframe'+i.time+'" name="iframe'+i.time+'"></iframe>',i.html+="</div>",cbt_dialog(i.html),i.addParameter=function(e,r){t("<input type='hidden' />").attr("name",e).attr("value",r).appendTo("#form"+i.time)},i.send=function(e){cbt_import_poll_i=0,t("#form"+i.time).submit(),cbt_import_poll("Loading importer"),t("#iframe"+i.time).load(function(){t("#cbt_popup .cbt_loader").slideUp(),e&&e(t(this).contents().find("body").html()),cbt_import_poll('<button class="button cbt-show-poll-log">show log</button>',"action"),t(".cbt-show-poll-log").click(function(){return t("#cbt_popup iframe").css({width:"100%",height:"300px"}).slideToggle(),!1})})}}t.redux=t.redux||{},t(document).ready(function(){t.redux.wbc_importer()}),t.redux.wbc_importer=function(){t("body").delegate(".wrap-importer.theme .theme-actions a","click",function(t){t.stopPropagation()}),t("body").delegate(".wrap-importer.theme.not-imported:not(.st-template-locked), #wbc-importer-reimport, #wbc-importer-uninstall","click",function(o){o.preventDefault();var n=jQuery(this),a=!1,s="Import Demo Content?";if("wbc-importer-reimport"==o.target.id?(a=!0,s="Re-Import Content?",jQuery(this).hasClass("rendered")||(n=jQuery(this).parents(".wrap-importer"))):"wbc-importer-uninstall"==o.target.id?(s="All pages, posts, images imported with this demo will be deleted.\nSure you want to uninstall?",a=!0,jQuery(this).hasClass("rendered")||(n=jQuery(this).parents(".wrap-importer"))):n.hasClass("st-template-type-takeaway")&&(s="All your website content, settings and plugins will be replaced.\nSure you want to continue?"),!n.hasClass("imported")||0!=a){if(0!=confirm(s)){if("wbc-importer-uninstall"==o.target.id)return void e(n);1==a&&n.removeClass("active imported").addClass("not-imported"),n.find(".spinner").css("display","inline-block"),n.removeClass("active imported"),n.find(".importer-button").hide();var l=jQuery(this).data();new RegExp("#js#(.*)#js#");l.action="redux_wbc_importer",l.id=n.attr("id"),l.demo_import_id=n.attr("data-demo-id"),l.nonce=n.attr("data-nonce"),l.type="import-demo-content",l.wbc_import=1==a?"re-importing":" ",l.takeaway=!1,n.hasClass("st-template-type-takeaway")&&(l.takeaway=!0),n.find(".wbc_image").css("opacity","0.5"),cbt_dialog("loader");var c=new i(ajaxurl);return c.addParameter("action",l.action),c.addParameter("id",l.id),c.addParameter("demo_import_id",l.demo_import_id),c.addParameter("nonce",l.nonce),c.addParameter("type",l.type),c.addParameter("wbc_import",l.wbc_import),c.addParameter("takeaway",l.takeaway),c.send(function(e){n.find(".wbc_image").css("opacity","1"),n.find(".spinner").css("display","none"),e.length>0&&e.match(/Have fun!/gi)?(0==a&&(n.addClass("rendered").find(".wbc-importer-buttons .importer-button").removeClass("import-demo-data"),n.find(".theme-actions .wbc-importer-buttons").append(r)),n.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),n.find(".importer-button").attr("style",""),n.addClass("imported active").removeClass("not-imported")):(n.find(".import-demo-data").show(),1==a&&(n.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),n.find(".importer-button").attr("style",""),n.addClass("imported active").removeClass("not-imported")),e.length>0&&e.match(/id="content"/gi)?(cbt_import_poll("There was an internal server error importing demo content.<br />Most likely due to incompatible server settings such as<br />maximum execution time, maximum memory allowance etc.","error"),t(".cbt-show-poll-log").click()):cbt_import_poll("There was an error importing demo content","error"))}),!1}}});var r='<a target="_blank" class="button wbc-importer-view-content" href="#">View Imported Pages</a><div id="wbc-importer-reimport" class="wbc-importer-buttons button-primary import-demo-data importer-button">Re-Import</div><div id="wbc-importer-uninstall" class="wbc-importer-buttons button">Uninstall</div>';t("body").on("cbt_importer-loaded",function(){var e,i;cbt_imported_demos&&t(".wrap-importer.theme.not-imported").each(function(){e=jQuery(this),i=e.attr("id"),void 0!==cbt_imported_demos[i]&&(e.addClass("rendered").find(".wbc-importer-buttons .importer-button").removeClass("import-demo-data"),e.find(".theme-actions .wbc-importer-buttons").append(r),e.find(".importer-button:not(#wbc-importer-reimport)").removeClass("button-primary").addClass("button").text("Imported").show(),e.find(".importer-button").attr("style",""),e.addClass("imported active").removeClass("not-imported"),cbt_imported_demos[i].pages_url?t("a.wbc-importer-view-content",e).attr("href",cbt_imported_demos[i].pages_url):t("a.wbc-importer-view-content",e).remove())}),t(".cbt_marketplace_container:not(.st_filterizr)").each(function(){if(!(t(this).find("> .filtr-item").length<1)){e=jQuery(this),e.addClass("st_filterizr"),e.parent().find(".st-marketplace-filters").show();t(".cbt_marketplace_container.st_filterizr").filterizr().filterizr("filter","1")}})}),t("body").delegate(".st-only-purchased-btn","click",function(e){t(this).hasClass("active")?t('.st-marketplace-categories li[data-filter="1"]').click():t(this).addClass("active")}),t("body").delegate(".st-unlock-bonus-btn","click",function(e){e.stopPropagation(),cbt_dialog(t(".st-marketplace-bonus-dialog-container").html()),t(".cbt-bonus-button").click(function(){var e=t(".cbt-bonus-password:visible").val();return cbt_dialog("loader"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"cbt_unlock_bonus",password:e},success:function(t){cbt_dialog(t)}}),!1})}),t("body").delegate(".st-marketplace-categories li.st-filter-bar-btn","click",function(e){t(this).parent().find("li").removeClass("active"),t(this).addClass("active")}),t(".st-marketplace-search input").keypress(function(t){if(13==t.keyCode)return t.preventDefault(),!1})}}(jQuery);var cbt_import_poll_i=0;
//# sourceMappingURL=field_wbc_importer.js.map
